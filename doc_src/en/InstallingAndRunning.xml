<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../docbook-xml-4.5/docbookx.dtd"

[
<!ENTITY % manualvariables SYSTEM "manualvariables.mod">
%manualvariables;
]>

<chapter id="installing.and.running.omegat">
  <title id="installing.and.running.omegat.title">Installing and running OmegaT</title>

  <para>TODO OmegaT requires a &javaversionlong; installed on your machine to
  run. The download system proposes you packages that include one already
  bundled or generic packages that rely on you having a
  &javaversionlong; installed system-wide.</para>

  <para>OmegaT comes in 2 versions: the standard version, that is suitable to run every day and that comes with an updated reference manual and the code version, that includes all the current developments and is more suitable for testing new features.</para>

  <para>The download site is TODO here and all the packages indicated below are linked to that site.</para>

  <section id="installing.omegat">
	<title id="installing.omegat.title">Installing OmegaT</title>
	<section id="installing.omegat.windows">
	  <title>Windows</title>

      <section id="installing.omegat.windows.download.the.package">
		<title>Download the package</title>

		<para>Do you want OmegaT bundled with Java?</para>

		<itemizedlist>
          <listitem>
			<para><emphasis role="bold">No: </emphasis>download
			<filename>OmegaT_&vernb;_Windows_without_JRE.exe</filename>.</para>
          </listitem>

          <listitem>
			<para><emphasis role="bold">Yes:</emphasis> download
			<filename>OmegaT_&vernb;_Windows.exe</filename>.</para>

			<para>This package is bundled with &bundledjavaversion;. This JRE will
			not interfere with other Java implementations that may already be
			installed on your system.</para>
          </listitem>
		</itemizedlist>
      </section>

      <section id="installing.omegat.windows.install.the.package">
		<title><application>Install OmegaT</application></title>

		<para>To install OmegaT, double-click on the
		package you have downloaded.</para>

		<para>You can choose the language used during the installation and the
		language used by OmegaT. It is possible to modify that later by editing
		<filename>OmegaT.l4J.ini</filename>.</para>
      </section>

	</section>
	<section id="installing.omegat.linux.intel">
      <title>Linux (Intel)</title>

      <section id="installing.omegat.linux.intel.download.the.package">
		<title>Downloading the right package</title>

		<para>Do you want OmegaT bundled with Java?</para>

		<itemizedlist>
          <listitem>
			<para><emphasis role="bold">No:</emphasis> download
			<filename>OmegaT_&vernb;_Without_JRE.zip</filename>.</para>
          </listitem>

          <listitem>
			<para><emphasis role="bold">Yes:</emphasis> download
			<filename>OmegaT_&vernb;_Linux.tar.bz2</filename>.</para>

			<para>This package is bundled with &bundledjavaversion;. This JRE will
			not interfere with other Java implementations that may already be
			installed on your system.</para>
          </listitem>
		</itemizedlist>
      </section>

      <section id="installing.omegat.linux.intel.install.the.package">
		<title><application>Installing OmegaT</application></title>

		<para>Unpack/untar the downloaded file. This will create an
		<filename>omegat</filename> folder in the working folder in which you will
		find all the files needed to run OmegaT. To untar the
		<filename>.tar.gz</filename> file:</para>

		<programlisting>$ tar xf downloaded_file.tar.gz</programlisting>
      </section>

      <section id="installing.omegat.linux.intel.add..to.your.menus.or.panels">
		<title>Adding OmegaT to your menus (KDE) or
		panels (Gnome)</title>

		<section id="installing.omegat.linux.intel.add..to.your.menus.or.panels.kde">
          <title>KDE 4</title>

          <para>You can add OmegaT to your menus as
          follows:</para>

          <itemizedlist>
			<listitem>
              <para>Press <emphasis role="bold"> <keysym>Alt+F2</keysym>
              </emphasis> to show KRunner. Type
              <emphasis>kmenuedit+enter</emphasis> to run the command. The
              KMenuEditor appears. In KMenuEditor select <emphasis>File &gt;
              New Item.</emphasis></para>
			</listitem>

			<listitem>
              <para>Then, after selecting a suitable menu, add a submenu/item
              with <emphasis>File - New</emphasis> Submenu and <emphasis>File -
              New Item</emphasis>. Enter OmegaT as
              the name of the new item.</para>
			</listitem>

			<listitem>
              <para>In the "Command" field, use the navigation button to find
              your OmegaT launch script (the file
              named OmegaT in the unpacked folder),
              and select it.</para>
			</listitem>

			<listitem>
              <para>Click on the icon button (to the right of the
              Name/Description/Comment fields)</para>
			</listitem>

			<listitem>
              <para>Other Icons - Browse, and navigate to the
              <filename>images</filename> subfolder in the
              OmegaT application folder. Select the
              <filename>OmegaT.png</filename> icon.</para>
			</listitem>

			<listitem>
              <para>Finally, save the changes with <emphasis>File -
              Save.</emphasis></para>
			</listitem>
          </itemizedlist>
		</section>

		<section id="installing.omegat.linux.intel.add..to.your.menus.or.panels.gnome">
          <title>GNOME</title>

          <para>You can add OmegaT to your menus as
          follows:</para>

          <itemizedlist>
			<listitem>
              <para>Right-click on the panel - <emphasis>Add New
              Launcher</emphasis>.</para>
			</listitem>

			<listitem>
              <para>Enter "OmegaT" in the "Name"
              field; in the "Command" field, use the navigation button to find
              your OmegaT launch script (the file
              named OmegaT in the unpacked folder).
              Select it and confirm with OK.</para>
			</listitem>

			<listitem>
              <para>Click on the icon button, then hit
              <guibutton>Browse...</guibutton> and navigate to the
              <filename>images</filename> subfolder in the
              OmegaT application folder. Select the
              <filename>OmegaT.png</filename> icon. GNOME may fail to display the
              icon files in the available formats and initially appear to expect
              an SVG file, but if the folder is selected, the files should appear
              and <filename>OmegaT.png</filename> can be selected.</para>
			</listitem>
          </itemizedlist>
		</section>
      </section>
	</section>
	<section id="Installing.omegat.macos">
	  <title>macOS</title>

	  <section id="installing.omegat.macos.download.the.package">
		<title>Download the package</title>

		<para>OmegaT contains &bundledjavaversion;</para>

		<para>Download <filename>OmegaT_&vernb;_Mac.zip</filename>.</para>
	  </section>

	  <section id="installing.omegat.macos.install.the.package">
		<title>Install OmegaT</title>

		<para>Double click on <filename>OmegaT_&vernb;_Mac.zip</filename> to unpack
		it. This creates a folder called <filename>OmegaT</filename>. The folder
		contains 2 files: <filename>index.html</filename> and
		<filename>OmegaT.app</filename>. Copy the folder to a suitable location
		(e.g. Applications). Once you have done this, you can delete the
		<filename>OmegaT_&vernb;_Mac.zip</filename> file, it is no longer
		needed.</para>
	  </section>

	  <section id="installing.omegat.macos.add.to.the.dock">
		<title>Add OmegaT to the Dock</title>

		<para>Drag and drop <filename>OmegaT.app</filename> onto the Dock.</para>
	  </section>

	</section>

	<section id="installing.omegat.other.systems">
	  <title>Other systems</title>

	  <para>TODO This information applies to systems such as Solaris SPARC/x86/x64,
	  Linux x64/PowerPC, Windows x64.</para>

	  <section id="installing.omegat.other.systems.download.the.package">
		<title>Download the right
		package</title>

		<para>Users of other systems must have a &javaversionlong; on
		their system to be able to use OmegaT.</para>

		<para>[TODO] Do you have a Java implementation compatible with &javaversionlong;?</para>

		<itemizedlist>
		  <listitem>
			<para><emphasis role="bold">Yes:</emphasis> download
			<filename>OmegaT_&vernb;_Windows_without_JRE.zip</filename>. This
			package can be used on any system where a &javaversionlong;
			is installed.</para>
		  </listitem>

		  <listitem>
			<para><emphasis role="bold">I don't know:</emphasis> open a terminal
			and type <command>java -version</command>. If a "command not found" or
			similar message is returned, it is likely that Java is not installed
			on your system.</para>
		  </listitem>

		  <listitem>
			<para><emphasis role="bold">No:</emphasis> obtain a &javaversionlong; for your
			system (see below) and download
			<filename>OmegaT_&vernb;_Without_JRE.zip</filename>.</para>

			<para>[TODO] The Eclipse Foundation provides OpenJDK Runtime
			Environments JREs for other systems at <ulink
			url="http://www.oracle.com/technetwork/java/archive-139210.html"/>.</para>

			<para>[TODO] IBM provides JREs for Linux PowerPC at <ulink
			url="http://www.ibm.com/developerworks/java/jdk/linux/download.html"/>.</para>

			<para>Follow the installation instructions of the package you
			need.</para>
		  </listitem>
		</itemizedlist>
	  </section>

	  <section id="installing.omegat.other.systems.install.the.package">
		<title>Install OmegaT</title>

		<para>To install OmegaT, simply unpack the
		<filename>OmegaT_&vernb;_Without_JRE.zip</filename> file. This
		creates an <filename>./OmegaT_&vernb;_Without_JRE/</filename> folder in
		the working folder with all the files necessary to run
		OmegaT.</para>
	  </section>

	  <section id="installing.omegat.other.systems.install.convenient.shortcuts">
		<title>Install convenient shortcuts</title>

		<para>Follow your system's instructions to install
		OmegaT shortcuts in convenient places of your
		choosing.</para>
	  </section>
	  
	</section>
  </section>
  <section id="running.omegat">
	<title id="running.omegat.title">Running OmegaT</title>
    <section id="running.omegat.on.windows">
	  <title>Windows</title>

	  <para>The simplest way to launch OmegaT is to execute the
	  <filename>OmegaT.exe</filename> program.  The options for the program
	  start-up will be read from the
	  <filename>OmegaT.l4J.ini</filename> file, which resides in the same folder
	  as the exe file and which you can edit to reflect your setup. The
	  following example for the INI file reserves 1 GB of memory, requests
	  French as the user language and Canada as the country:</para>

	  <programlisting>
		# OmegaT.exe runtime configuration
		# To use a parameter, remove the '#' before the '-'
		# Memory
		-Xmx1024M
		# Language
		-Duser.language=FR
		# Country
		-Duser.country=CA
	  </programlisting>

	  <para>Advice: if OmegaT works slowly in Remote Desktop sessions under
	  Windows, you may use this option:</para>

	  <programlisting>-Dsun.java2d.noddraw=false</programlisting>
    </section>

	<section id="running.omegat.on.linux">
	  <title>Linux</title>

	  <para>You can launch OmegaT from the command line with a script that
	  includes start-up options or you can click on
	  <filename>OmegaT.jar</filename> to launch it directly. Methods differ
	  depending on the distribution. Make sure that your <varname>PATH</varname>
	  settings are correct and that <filename>.jar</filename> files are properly
	  associated with a Java launcher. See "<link
	  linkend="launch.with.command.line" endterm="launch.with.command.line.title"/>"
	  for details.</para>
	</section>

	<section id="running.omegat.on.macos">
	  <title>macOS</title>

	  <para>Double-click on <filename>OmegaT.app</filename> or click
	  on its location in the Dock.</para>

	  <para>To launch multiple instances of <filename>OmegaT.app</filename>,
	  double-click the file <emphasis>OmegaT</emphasis> located in
	  <filename>OmegaT.app/Contents/MacOS/</filename>.</para>

	  <para>Use the <filename>OmegaT.jar</filename> file located in
	  <filename>OmegaT.app/Contents/MacOS/Java/</filename> to launch
	  OmegaT from the command line. See "<link
	  linkend="launch.with.command.line" endterm="launch.with.command.line.title"/>"
	  for details.</para>

	  <para>You can modify OmegaT.app's behaviour by editing the
	  <filename>Configuration.properties</filename> (OmegaT configuration) as
	  well as the <filename>Info.plist</filename> file (Java configuration)
	  located inside the OmegaT.app package.</para>

	  <para>To access the configuration files, right-click on
	  <filename>OmegaT.app</filename> and select "Show Package Contents".</para>

	  <para><filename>Configuration.properties</filename> is located in
	  <filename>Contents/Resources</filename>. <filename>Info.plist</filename>
	  is located in <filename>Contents/</filename>.</para>
	  
	  <para>Right-click on the file you want to modify and select your text
	  editor of choice or <command>cd</command> there directly from the command
	  line and open the files from the command line.</para>

	  <para>OmegaT's configuration is changed by modifying
	  <filename>Configuration.properties</filename>.</para>

	  <para>For pre-defined options, remove the <literal>#</literal> before a
	  parameter to enable it. For example, <literal>user.language=ja</literal>
	  (without the <literal>#</literal>) will launch OmegaT with the user
	  interface in Japanese.</para>

	  <para>Java's configuration is changes by modifying <filename>Info.plist</filename>.</para>
	  <para>For exemple, to change the amount of memory available un-comment the
	  line <literal>&lt;!-- &lt;string&gt;-Xmx6g&lt;/string&gt; --&gt;</literal>
	  by removing the <literal>&lt;!--</literal> and
	  <literal>--&gt;</literal>. This will launch OmegaT with 6 GB of memory;
	  change the <literal>6g</literal> to the desired amount.</para>


      <section id="running.omegat.on.macos.goodies">
		<title>macOS goodies</title>

		<para><filename>OmegaT.app</filename> can make use of macOS
		Services. You can thus select a word anywhere in OmegaT and use Services
		to check this word, for instance in Spotlight or in the dictionary
		applications. You can also use AppleScript or Automator to create
		Services or scripts that will automate frequent actions.</para>
      </section>
    </section>

	<section id="running.omegat.on.other.systems">
	  <title>Other systems</title>

	  <para>Once OmegaT is installed, you can launch
	  it directly from the command line, you can create a script that includes
	  launch parameters for the command line or you can click on
	  <filename>OmegaT.jar</filename> to launch it directly. Methods differ
	  depending on the distribution. Make sure that your <varname>PATH</varname>
	  settings are correct and that <filename>.jar</filename> files are properly
	  associated with a Java launcher. See "<link
	  linkend="launch.with.command.line" endterm="launch.with.command.line.title"/>"
	  for details.</para>
	</section>

  </section>


  <section id="opening.project.drag.and.drop">
	<title>Drag and drop</title>

	<para>In most systems, it is possible to open a project by dropping an
	<filename>omegat.project</filename> file onto the OmegaT icon on the
	desktop. It might also be possible to open an OmegaT project by
	double-clicking on an <filename>omegat.project</filename> file.</para>
  </section>

  <!-- Remove Java WebStart 
	   <section id="using.Java.Web.Start">
	   <title>Using Java Web Start</title>

<para>Java Web Start technology (part of Java 8 and above) can be used to
deploy standalone Java software applications with a single click over the
network. Java Web Start ensures that the latest version of the application
will be deployed, as well as the correct version of the Java Runtime
Environment (JRE) used. To start OmegaT for the first time with Java Web
Start, load the following URL in your browser:</para>

<para><ulink url="https://omegat.sourceforge.io/webstart/OmegaT.jnlp"/></para>

<para>Download the file <filename>OmegaT.jnlp</filename> and then click on
it. During the installation, depending on your operating system, you may
receive several security warnings. The permissions you give to this version
(which may appear as "unrestricted access to the computer") are identical to
the permissions you give to the local version, i.e., they allow access to
the hard drive of the computer. Subsequent clicks on
<filename>OmegaT.jnlp</filename> will check for any upgrades, install them,
if there are any, and then start OmegaT. After
the initial installation you can, of course, also use
<filename>OmegaT.jnlp</filename> also when you are offline.</para>

<para><emphasis role="bold">Privacy</emphasis>:
OmegaT Java Web Start does not save any of your
information beyond the computer on which you are running it. The application
runs on your machine only. Your documents and translation memories remain on
your computer, and the OmegaT project will have
no access to your work or information.</para>

<para>Note that if you need or wish to use any of the launch command
arguments (see above), you must use the normal installation.</para>
</section>
  -->

  <section id="build.omegat.from.source">
	<title>Building OmegaT From Source</title>

	<para>The sources of the current version can be retrieved with a Git client
	from the repository <ulink url="https://git.code.sf.net/p/omegat/code"/>
	or directly on <ulink
	url="https://sourceforge.net/p/omegat/code/ci/master/tarball?path=">SourceForge</ulink>.
	</para>

	<para>Once the code is downloaded, open a command in the source folder and
	type:</para>

	<programlisting>gradlew assembleDist</programlisting>

	<para>This will create a full distribution of OmegaT in the
	<filename>./build/distributions</filename> folder, where you will find a zip
	containing everything needed to run
	OmegaT.</para>

	<para>You can also run directly the application with the following
	command:</para>

	<programlisting>gradlew run</programlisting>

	<para>Detailed instructions on building are in the docs_devel <ulink
	url="https://sourceforge.net/p/omegat/svn/HEAD/tree/trunk/docs_devel/README.txt">readme</ulink>.</para>
  </section>
  
  <section id="updage.and.erase.omegat">
    <title>Upgrading and erasing OmegaT</title>

    <para>If you already have a version of OmegaT installed on your PC and
    wish to upgrade to a more recent version, you have two options:</para>

    <itemizedlist>
      <listitem>
        <para><emphasis role="bold">Install over the existing
        installation.</emphasis> To do this, simply select the same
        installation folder as the existing installation when installing the
        new version. The "old" version of OmegaT will be overwritten, but any
        settings from it will be retained. This includes preferences set from
        within OmegaT, any changes you have made to your
        <filename>OmegaT.l4J.ini</filename> file, and also your launch script
        (<filename>.bat</filename> file), if you are using one.</para>
      </listitem>
    </itemizedlist>

    <para>With this method, you may also download the "Windows without JRE"
    version, since the new installation will use your existing JRE.</para>

    <itemizedlist>
      <listitem>
        <para><emphasis role="bold">Install to a new folder.</emphasis> This
        will enable you to keep both versions side-by-side, which you may wish
        to do until you feel comfortable with the new version. This method
        will also use preferences and settings you have made from within
        OmegaT. In this case, however:</para>

        <itemizedlist>
          <listitem>
            <para>If you have made changes to your
            <filename>OmegaT.l4J.ini</filename> file and/or are using a .bat
            file, you must copy these over.</para>
          </listitem>
        </itemizedlist>

        <itemizedlist>
          <listitem>
            <para>If your existing OmegaT installation is a "Windows with
            JRE" version, the new version must also be a "Windows with JRE"
            version.</para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </section>
</chapter>
